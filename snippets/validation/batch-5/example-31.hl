/*
 * Read up to 40 rows from the [Track] table in the 'chinook' database,
 * and add any track to [.tracks_filtered] if [Milliseconds] is greater than 300000
 * or [Bytes] is greater than 5000000. Use [data.connect], [data.read], [for-each], [if],
 * [or], [mt], [get-value], and [add] to implement the logic.
 */
.tracks_filtered
data.connect:chinook
   data.read
      table:Track
      limit:int:40
   for-each:x:@data.read/*
      if
         or
            mt
               get-value:x:@.dp/#/*/Milliseconds
               .:int:300000
            mt
               get-value:x:@.dp/#/*/Bytes
               .:int:5000000
         .lambda
            add:x:@.tracks_filtered
               get-nodes:x:@.dp/#
