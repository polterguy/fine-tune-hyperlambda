/*
 * Returns support ticket records from the [helpdeskDB] database.
 *
 * An optional [priority.eq] argument can be passed to filter tickets by urgency level
 * (e.g., 'high', 'low', 'medium'). If not provided, the query returns all recent tickets.
 */
.arguments
   priority.eq:string

data.connect:helpdeskDB

   add:x:@data.connect/*/data.read/*/where/*/and
      get-nodes:x:@.arguments/*/priority.eq
   data.read
      table:Tickets
      limit:10
      where
         and
   yield
      tickets:x:@data.read/*
