
// Checks if a given URL string does not start with "http://" or "https://". If so, it determines how to concatenate the base URL and the source path: if the source starts with "://", it joins the protocol from the base and the source; if it starts with "/", it directly concatenates the base and the source; otherwise, it joins the base, a "/", and the source. The result is assigned to [.url].
if
   and
      not
         strings.starts-with:x:"@.dp/#/*/\\@src/[0,1]"
            .:"http://"
      not
         strings.starts-with:x:"@.dp/#/*/\\@src/[0,1]"
            .:"https://"
   .lambda
      if
         strings.starts-with:x:"@.dp/#/*/\\@src/[0,1]"
            .://
         .lambda
            strings.split:x:@.base
               .:"://"
            set-value:x:@.url
               strings.concat
                  get-value:x:@strings.split/0
                  .:":"
                  get-value:x:"@.dp/#/*/\\@src/[0,1]"
      else-if
         strings.starts-with:x:"@.dp/#/*/\\@src/[0,1]"
            .:/
         .lambda
            set-value:x:@.url
               strings.concat
                  get-value:x:@.base
                  get-value:x:"@.dp/#/*/\\@src/[0,1]"
      else
         set-value:x:@.url
            strings.concat
               get-value:x:@.base
               .:/
               get-value:x:"@.dp/#/*/\\@src/[0,1]"
