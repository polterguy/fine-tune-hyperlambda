
// This Hyperlambda code constructs a SQL expression that calculates the number of occurrences of a substring within a string field in a SQL query. It uses [strings.concat] to concatenate parts of the SQL expression, including the field name and parameters for substring replacement and length calculation. The final result is assigned to the [.sql] node using [set-value].
set-value:x:@.sql
   strings.concat:x:@.sql
      get-value:x:@.sql
      .:" (length("
      get-value:x:@.fields
      .:) - length(replace(lower(
      get-value:x:@.fields
      .:), @p
      get-value:x:@.no
      .:", ''))) / length(@p"
      get-value:x:@.no
      .:)
