
// The code iteratively processes nodes from an [execute] node while certain conditions are met. It checks if the [execute] node exists and if the token count of [.context] is less than 4000. Within the loop, it concatenates strings into [.tmp] and updates [.context] if [.tmp]'s token count is below 4000. It removes nodes from [execute] and deletes [execute] if no snippets remain.
while
   and
      exists:x:@execute/0
      lt
         openai.tokenize:x:@.context
         .:int:4000
   .lambda
      .tmp
      set-value:x:@.tmp
         strings.concat
            get-value:x:@.context
            .:"\n\n"
            get-value:x:@execute/0/*/prompt
            .:"\n\n"
            get-value:x:@execute/0/*/completion
      if
         lt
            openai.tokenize:x:@.tmp
            .:int:4000
         .lambda
            set-value:x:@.context
               get-value:x:@.tmp
      remove-nodes:x:@execute/0/*/snippets/0
      if
         not-exists:x:@execute/0/*/snippets/0
         .lambda
            remove-nodes:x:@execute/0
