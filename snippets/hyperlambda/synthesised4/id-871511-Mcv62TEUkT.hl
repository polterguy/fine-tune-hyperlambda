
/*
 * The code establishes a connection to a SQLite database and performs an update operation on the "Patients" table. It checks if the update affected any records; if not, it sets a 404 status and returns a "Record not found" message. If records are updated, it sets a 202 status and sends a signal via sockets with specified arguments and roles. Finally, it returns the number of affected records. 
 * 
 * 1. [data.connect] - Connects to the SQLite database using a specified connection string.
 * 2. [database-type] - Specifies the database type as SQLite.
 * 3. [add] - Adds nodes to the update operation's values and where conditions.
 * 4. [get-nodes] - Retrieves nodes from the arguments for the update operation.
 * 5. [data.update] - Performs the update operation on the "Patients" table.
 * 6. [where] - Specifies the conditions for the update operation.
 * 7. [if] - Checks if the update operation affected any records.
 * 8. [eq] - Compares the result of the update operation to zero.
 * 9. [get-value] - Retrieves the value of the update operation result.
 * 10. [response.status.set] - Sets the HTTP response status.
 * 11. [return] - Returns a message or result.
 * 12. [sockets.signal] - Sends a signal with specified arguments and roles.
 * 13. [unwrap] - Evaluates expressions in the following nodes.
 * 14. [affected] - Returns the number of affected records from the update operation.
 */
data.connect:[generic|hospital]
   database-type:sqlite
   add:x:./*/data.update/*/values
      get-nodes:x:@.arguments/*/[1,1000]
   add:x:./*/data.update/*/where/*/and
      get-nodes:x:@.arguments/*/[0,1]
   data.update
      database-type:sqlite
      table:Patients
      values
      where
         and
   if
      eq
         get-value:x:@data.update
         .:int:0
      .lambda
         response.status.set:404
         return
            result:Record not found
   response.status.set:202
   add:x:./*/sockets.signal/*/args
      get-nodes:x:@.arguments/*
   sockets.signal:hospital.Patients.put
      args
      roles:admin,root
   unwrap:x:+/*
   return
      affected:x:@data.update
