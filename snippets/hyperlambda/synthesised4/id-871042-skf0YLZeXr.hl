
// This Hyperlambda code generates a SQL script for MySQL databases. It optionally creates a new database and disables foreign key checks if the [full] argument is true. The code iterates over tables, retrieves their creation SQL, and appends it to the result. Finally, it re-enables foreign key checks if [full] is true and returns the complete SQL script. Key slots include [strings.concat] for building strings, [data.select] for executing SQL, and [for-each] for iterating tables.
case:mysql
   .result
   set-value:x:@.result
      strings.concat
         .:@"/*
 * Automatically generated by Magic.
 */
"
   if:x:@.arguments/*/full
      set-value:x:@.result
         strings.concat
            get-value:x:@.result
            .:"create database "
            get-value:x:@.arguments/*/databaseName
            .:@";
use "
            get-value:x:@.arguments/*/databaseName
            .:@";
set foreign_key_checks = 0;

"
   for-each:x:@.arguments/*/tables/*
      .sql
      set-value:x:@.sql
         strings.concat
            .:"show create table "
            get-value:x:@.dp/#
      data.select:x:@.sql
         database-type:x:@.arguments/*/databaseType
      set-value:x:@.result
         strings.concat
            get-value:x:@.result
            get-value:x:@data.select/*/1
            .:@";

"
   if:x:@.arguments/*/full
      set-value:x:@.result
         strings.concat
            get-value:x:@.result
            .:@"SET foreign_key_checks = 1;
"
   unwrap:x:+/*
   return
      result:x:@.result
