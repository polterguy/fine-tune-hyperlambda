
// This Hyperlambda code checks if a reCAPTCHA value exists and is not empty, then converts it to a decimal. If the converted value is greater than zero, it retrieves configuration keys for reCAPTCHA and validates the response using these keys. If the keys are not available, it executes a fallback function for captcha verification. The code uses slots like [if], [and], [not-null], [neq], [convert], [mt], [set-value], [validators.mandatory], [validators.recaptcha], and [execute] to perform these operations.
if
   and
      not-null:x:@data.read/*/*/recaptcha
      neq:x:@data.read/*/*/recaptcha
         .:
   .lambda
      convert:x:@data.read/*/*/recaptcha
         type:decimal
      if
         mt:x:@convert
            .:decimal:0
         .lambda
            .key
            set-value:x:@.key
               config.get:"magic:auth:recaptcha:key"
            .secret
            set-value:x:@.secret
               config.get:"magic:auth:recaptcha:secret"
            if
               and
                  not-null:x:@.key
                  neq:x:@.key
                     .:
                  not-null:x:@.secret
                  neq:x:@.secret
                     .:
               .lambda
                  validators.mandatory:x:@.arguments/*/recaptcha_response
                  validators.recaptcha:x:@.arguments/*/recaptcha_response
                     min:x:@convert
                     site-key:x:@.key
                     secret:x:@.secret
      else
         execute:magic.auth.captcha-verify
            token:x:@.arguments/*/recaptcha_response
