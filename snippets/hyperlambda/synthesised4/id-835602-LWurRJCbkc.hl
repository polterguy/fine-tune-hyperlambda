
// The code snippet constructs a SQL expression to calculate the occurrence of a substring within a column. It uses [set-value] to update the [.sql] node by concatenating parts of the SQL expression using [strings.concat], incorporating values from [.fields] and [.no] nodes to dynamically build the SQL query. The expression calculates the difference in length before and after replacing the substring, divided by the substring's length, to determine the count of occurrences.
set-value:x:@.sql
   strings.concat:x:@.sql
      get-value:x:@.sql
      .:" (length("
      get-value:x:@.fields
      .:) - length(replace(lower(
      get-value:x:@.fields
      .:), @p
      get-value:x:@.no
      .:", ''))) / length(@p"
      get-value:x:@.no
      .:)
