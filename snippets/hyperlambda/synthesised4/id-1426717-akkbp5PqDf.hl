
/*
 * // This Hyperlambda code concatenates a SQL query string with additional parameters to form a complete SQL command. It uses the [strings.concat] slot to combine a multi-line SQL query with a value retrieved from a node and a static string. The SQL query involves selecting specific columns from a table with a join operation, filtering based on certain conditions, and limiting the results. The final SQL command is constructed by appending the retrieved value and a limit clause to the base query.
 * // 1. [strings.concat] - Initiates the concatenation process for creating a SQL query string.
 * // 2. [.] - Contains the main SQL query string with placeholders for parameters.
 * // 3. [get-value:x:@.tail] - Retrieves a value from a node named [tail] to be included in the concatenated string.
 * // 4. [.] - Appends a static string " limit 20" to the concatenated SQL query.
 */
strings.concat
   .:@"
select vss.distance, vss.rowid as id, ts.prompt, ts.completion, ts.uri, ts.cached
	from vss_ml_training_snippets as vss
    	inner join ml_training_snippets ts on ts.id = vss.rowid
   where
      ts.type = @type and
      vss_search(vss.embedding_vss, @embedding) and
      vss.distance < @threshold"
   get-value:x:@.tail
   .:" limit 20"
