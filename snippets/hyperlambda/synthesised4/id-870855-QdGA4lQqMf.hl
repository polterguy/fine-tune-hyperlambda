
// This Hyperlambda code checks if there are any attachments in the [.arguments] node. If attachments exist, it creates a MIME entity of type [multipart/mixed] with the specified [mime-type] and [content] from [.body]. It then adds the attachments to this entity, removes any existing [entity] nodes under [mail.smtp.send/message], and finally adds the newly created entity to the [message]. The slots used include [if], [exists], [.lambda], [add], [get-nodes], and [remove-nodes].
if
   exists:x:@.arguments/*/attachments/*
   .lambda
      .entity
         entity:multipart/mixed
            entity:x:@.arguments/*/mime-type
               content:x:@.body
      add:x:@.entity/*
         get-nodes:x:@.arguments/*/attachments/*
      remove-nodes:x:../*/mail.smtp.send/*/message/*/entity
      add:x:../*/mail.smtp.send/*/message
         get-nodes:x:@.entity/*
