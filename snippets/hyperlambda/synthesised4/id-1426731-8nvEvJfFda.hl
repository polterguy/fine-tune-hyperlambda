
/*
 * // This Hyperlambda code iterates over a subset of nodes from an XML structure, specifically targeting sitemap URLs. It checks if the number of URLs is less than 10,000, and if so, it loads the sitemap using a signal, adds the URLs to a collection, and sets a flag if no sitemap is found and the URL count is zero.
 * // 1. [for-each] - Iterates over a subset of nodes in the XML structure.
 * // 2. [if] - Checks if the URL count is less than 10,000.
 * // 3. [unwrap] - Evaluates expressions before execution.
 * // 4. [signal] - Loads the sitemap with specific parameters.
 * // 5. [add] - Adds nodes to the URL collection.
 * // 6. [if] - Checks conditions to set the has-sitemap flag.
 * // 7. [set-value] - Sets the has-sitemap flag to false if conditions are met.
 */
for-each:x:"@xml2lambda/*/sitemapindex/*/sitemap/*/[0,25]/loc/*/\\#text"
   if
      lt
         get-count:x:@.urls/*
         .:int:10000
      .lambda
         unwrap:x:+/**
         signal:magic.ai.load-sitemap
            max:int:10000
            feedback-channel:x:@.arguments/*/feedback-channel
            filter-on-url:x:@.arguments/*/filter-on-url
            sitemap
               .:x:@.dp/#
         add:x:@.urls
            get-nodes:x:@signal/*/urls/*
         if
            and
               eq:x:@signal/*/has-sitemap
                  .:bool:false
               eq
                  get-count:x:@.urls/*
                  .:int:0
            .lambda
               set-value:x:@.has-sitemap
                  .:bool:false
