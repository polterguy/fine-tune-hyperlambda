
/*
 * Create an endpoint that checks whether OpenAI has been enabled for the system.
 *
 * This is determined by checking if an OpenAI API key exists in the configuration under
 * the key [magic:openai:key]. If the key is missing or empty, the endpoint returns `false`.
 * Otherwise, it returns `true`.
 *
 * Access to this endpoint is restricted to root users using [auth.ticket.verify:root].
 */
.arguments

// Making sure user has access to invoked endpoint.
auth.ticket.verify:root

// Checking if configuration setting for OpenAI API key exists.
config.get:"magic:openai:key"
if
   eq:x:@config.get
      .
   .lambda

      // No API key found for OpenAI
      return
         result:bool:false

// OpenAI API key exists.
return
   result:bool:true
