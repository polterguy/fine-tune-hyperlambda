
// Append a formatted block to the [.tmp-completion] node if [.function-result] is not null. The block should concatenate the current value of [.result], two newlines, the string "Result of function invocation:", two more newlines, a markdown JSON code block start (```json), a newline, the value of [.function-result], another newline, and a markdown code block end (```). Also, update [.function-result] with its own value to ensure it's preserved.
if
   not-null:x:@.function-result
   .lambda
      set-value:x:@.tmp-completion
         strings.concat
            get-value:x:@.result
            .:@"
"
            .:@"
"
            .:@"Result of function invocation:
"
            .:@"
"
            .:```json
            .:@"
"
            get-value:x:@.function-result
            .:@"
"
            .:```
      set-value:x:@.function-result
