
// Check if all of the following are true: the [.arguments/*/supervised] node exists, the [.arguments/*/supervised] node is not null, and the integer value of [.arguments/*/supervised] is equal to 1. If so, connect to either the [generic] or [magic] database, and create a new record in the [ml_requests] table using values from the corresponding nodes under [.arguments] and [signal], setting [finish_reason] to "cached".
if
   and
      exists:x:@.arguments/*/supervised
      not-null:x:@.arguments/*/supervised
      eq
         convert:x:@.arguments/*/supervised
            type:int
         .:int:1
   .lambda
      data.connect:[generic|magic]
         data.create
            table:ml_requests
            values
               type:x:@.arguments/*/type
               prompt:x:@.arguments/*/prompt
               completion:x:@signal/*/cached
               finish_reason:cached
               session:x:@.arguments/*/session
               user_id:x:@.arguments/*/user_id
               referrer:x:@.arguments/*/referrer
