
// Use [if] to check that the [.system_message] node inside [.arguments] both exists (is not null) and is not an empty string. If both of these conditions are true, then execute the lambda block that first unwraps the value from a content node (found by traversing three levels up and then down to content), and then adds a new node to [.session] with a nested structure containing a [role] node set to "system" and a [content] node set to the value of [.system_message] from [.arguments].
if
   and
      not-null:x:@.arguments/*/system_message
      neq:x:@.arguments/*/system_message
         .:
   .lambda
      unwrap:x:+/*/*/*/content
      add:x:@.session
         .
            .
               role:system
               content:x:@.arguments/*/system_message
