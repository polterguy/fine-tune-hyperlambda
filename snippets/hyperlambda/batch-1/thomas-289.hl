/*
 * Flattens nested `.profile` values into key-value pairs under `.flattenedProfile`.
 */
.profile
   identity
      name:Sarah
      age:int:29
   contact
      email:sarah@example.com
      phone:12345678
.flattenedProfile
for-each:x:@.profile/*/*
   get-name:x:@.dp/#
   unwrap:x:+/*/**
   add:x:@.flattenedProfile
      .
         field
            key:x:@get-name
            val:x:@.dp/#
